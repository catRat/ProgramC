\chapter{善于利用指针}
指针是C语言中一个重要的概念，也是C语言的一个重要特色。正确而灵活地运用它，可以使程序简洁、紧凑、高效。每一个学习和使用C语言的人，都应该深入地学习和掌握指针。可以说，不掌握指针就没有掌握C的精华。

指针的概念比较复杂，使用也比较灵活，因此初学时常会出错，务请在学习本章内容时十分小心，多思考、多比较、多上机，在实践中掌握它。本书在叙述时也力图用通俗易懂的方法使读者易于理解。
\section{指针是什么}
为了所名清楚是指针，必须先清楚数据在内存中是如何存储的，又是如何读取的。

如果在程序中定义了一个变量，在对程序进行编译时，系统就会给这个变量分配内存单元。编译系统根据程序汇总定义的变量类型，分配一定长度的空间。

由于通过地址能找到所需的变量单元，可以说，地址指向变量单元。因此，将地址形象化地称为“指针”。

这种直接按变量名进行访问，称为“直接访问”方式。

还可有采用另一种称为“间接访问”的方式，即变量i的地址存放在另一个变量中，然后通过该变量来找到变量i的地址，从而访问i变量。

在C语言程序中，可以定义整型变量、浮点型变量、字符变量等，也可以定义这样一种特殊的变量，用它存放地址。

一个变量的地址称为该变量的“指针”。
\section{指针变量}
从上节已知：存放地址的变量是指针变量，它用来指向另一个对象。那么，怎样定义和使用指针变量呢？
\section{通过指针引用数组}
先分析一个例子。

例 通过指针变量访问整型变量。
\section{通过指针引用字符串}
在例中已看到怎样定义指针变量，定义指针变量的一般i形式为：
\begin{lstlisting}
类型名 * 指针变量名
\end{lstlisting}

在定义指针变量时必须指定基类型。

一个变量的指针的含义包括两个方面，一是以存储单元编号表示的地址，一是它指向的存储单元的数据类型。
\section{指向函数的指针}
在引用指针变量时，可能有3种情况。
\section{返回指针值的函数}
函数的参数不仅可以是整型、浮点型、字符型等数据，还可以是指针类型。它的作用是将一个变脸的地址传送到另一个函数中。

例 对输入的两个整数按大小顺序输出。用函数处理，且用指针类ixng数据作为函数参数。
\section{通过指针引用数组}
\subsection{数组元素的指针}
一个变量有地址，一个数组包含若干元素，每个数组元素都在内存中占用存储单元，它们都有相应的地址。指针变量既然可以指向变量，当然也可以指向数组元素。所谓ie数组元素的指针就是数组元素的地址。
\subsection{在因哟个数组元素时指针的运算}
\subsection{通过指针引用数组元素}
\subsection{用素组名作函数参数}
\subsection{通过指针引用多维数组}
指针变量可以指向一维数组中的元素，也可以指向多维数组中的元素。但在概念上和使用方法上，多维数组的指针比一维数组的指针要复杂一些。
\begin{enumerate}
	\item 多维数组元素的地址

	\item 指向多维数组元素的指针变量
	\item 用指向数组的指针作函数参数
\end{enumerate}
\section{通过指针引用字符串}
在前几章中已大量地使用了字符串。这些字符串都是以直接方式（字面形式）给出，在一对双撇号中那个包含若干个合法的字符。在本节中将介绍使用字符串的更加灵活方便的方法——通过指针引用字符串。
\subsection{字符串的引用方法}
在C程序中，字符串是存放在字符数组中的。想引用一个字符串，可以用以下两种方法。
\subsection{字符串指针作函数参数}
如果想把一个字符串从一个函数“传递”到另一个函数，可以用地址传递的方法，即用字符数组名作为参数，也可以用字符指针变量做参数。在被调用的函数中可以改变字符串的内容，在主调函数中可以引用改变后的字符串。

用函数实现字符串的复制。
\subsection{使用字符指针变量和字符数组的比较}
用字符数组和字符指针变量都能实现字符串的存储和运算，但它们二者直接按是有区别的，不应混为一谈，主要有以下几点。
\begin{enumerate}
	\item 字符数组由若干个元素组成，每个元素中放一个字符，而字符指针变量中存放的是地址。
	\item 赋值方式。可以对字符指针变量赋值，但不能对数组名赋值。
	\item 初始化的含义。
	\item 存储单元的内容。
	\item 指针变量的值是可以改变的，而数组名代表一个固定的值。
\end{enumerate}
\section{指向函数的指针}
如果在程序中定义了一个函数，在编译时，编译系统为函数代码分配一段存储空间，这段存储空间的起初地址成为这个函数的指针。
\subsection{用函数指针变量调用函数}
如果想调用一个函数，除了可以通过函数名调用以外，还可以通过指向函数的指针变量来调用该函数。

例 用函数求整数a和b中的大者。
\subsection{怎样定义和使用指向函数的指针变量}
\subsection{用只想函数的指针作为函数参数}
\section{返回指针值的函数}
\section{指针数组和多重指针}
一个数组，若其元素均为指针类型数据，称为指针数组，也就是说，指针数组中的没一个元素都存放一个地址，相当于一个指针变量。
\subsection{指针数组作main函数的形参}
指针数组的一个重要应用是作为main函数的形参。
\section{动态内存分配与指向它的指针变量}
\subsection{什么是内存的动态分配}
第7章介绍过全局变量和局部变量，全局变量是分配在内存中的静态存储区，非静态的局部变量是分配在内存中的动态存储区，这个存储区是一个称为栈的区域。
\subsection{怎样建立内存的动态分配}
\subsection{void指针类型}
\section{有关指针的小结}
\section{习题}
\begin{enumerate}
	\item 输入3个整数，按由小到大的顺序输出。
	\item 输入3个字符串，按由小到大的顺序输出。
	\item 输入3个整数，按由小到大的顺序输出。
	\item 输入10个整数，将其中最小的数与地一个数对换，把最大的数与最后一个数对换。写3个函数：
		\begin{enumerate}
			\item 输入10个数
			\item 进行处理
			\item 输出10个数
		\end{enumerate}
	\item 有n个整数，使前面各数顺序向后移$m$个位置，最后$m$个数变成最前面$m$个数。写一个函数实现以上功能，在主函数中输入$n$个整数和输出调整后的$n$个数。
	\item 有$n$个人围成一圈，顺序排号。从第1个人开始顺序报号1,2,3.凡报道3者退出圈子。找出最后留在圈子中的人原来的序号。要求用链表实现。
	\item 写一个函数，求一个字符串的长度。在main函数中输入字符串，并输出其长度。
	\item 有一个字符串，包括$n$个字符。写一函数，将此字符串从第$m$个字符开始的全部字符复制成为另一个字符串。
	\item 输入一行文字，找出其中大写字母、小写字母、空格、数字以及其他字符各有多少。
	\item 写一函数，将一个$3 \times 3$的整数矩阵转置。
	\item 将一个$5 \times 5$的矩阵中最大的元素放在中心，4个角分别放4个最小的元素，写一函数实现之。用main函数调用。
	\item 在主函数中输入10个等长的字符串。用另一函数对它们排序。然后在主函数输出这10个已排好序的字符串。
	\item 用指针数组处理上一题目，字符串不等长。
	\item 写一个用矩形法求定积分的通用函数，分别求。
	\item 将$n$个数按输入时顺序的逆序排列，用函数实现。
	\item 有一个班4个学生，5们课程。
	\item 输入一个字符串，内有数字和非数字字符。将其中连续的数字作为一个整数，依次放到一个数组a中。
	\item 写一函数，实现两个字符串的比较。
	\item 编一程序，输入月份号，输出该月的英文月名。
	\item 
		\begin{enumerate}
			\item 编写一个函数new，对n个字符开辟连续的存储空间，此函数返回一个指针，指向字符串开始的空间。new(n)表示分配n个字节的内存空间。
			\item 写一函数free，将前面用new函数占用的空间爱你释放。free(p)表示将p指向的单元以后的内存段释放。
		\end{enumerate}
	\item 用只想指针的指针的方法对5个字符串排序并输出。
	\item 用指向指针的指针的方法对$n$个整数排序并输出。要求将排序单独写成一个函数。$n$个整数在主函数输入，最后在主函数中输出。
\end{enumerate}
